# Инструкция по публикации в npm

## Подготовка

1. **Обновите package.json:**
   - Укажите правильный `author` (ваше имя и email)
   - Обновите `repository.url` на реальный URL вашего GitHub репозитория
   - Обновите `homepage` и `bugs.url` на реальные URL
   - Проверьте, что имя пакета уникально (если `mcp-openproject-standalone` уже занято, измените имя)

2. **Проверьте имя пакета:**
   ```bash
   npm search mcp-openproject-standalone
   ```
   Если пакет с таким именем уже существует, измените `name` в `package.json` на уникальное (например, `@yourusername/mcp-openproject-standalone`)

## Публикация

### 1. Создайте аккаунт на npm (если еще нет)

Перейдите на https://www.npmjs.com/signup и создайте аккаунт.

### 2. Войдите в npm через командную строку

```bash
npm login
```

Введите ваш username, password и email.

### 3. Проверьте, что вы вошли в систему

```bash
npm whoami
```

Должно показать ваше имя пользователя.

### 4. Проверьте содержимое пакета перед публикацией

```bash
npm pack
```

Это создаст `.tgz` файл, который будет опубликован. Распакуйте и проверьте содержимое.

### 5. Опубликуйте пакет

```bash
npm publish
```

Если вы используете scoped пакет (например, `@yourusername/mcp-openproject-standalone`), используйте:

```bash
npm publish --access public
```

### 6. Проверьте публикацию

После публикации проверьте, что пакет доступен:

```bash
npm view mcp-openproject-standalone
```

Или откройте в браузере: https://www.npmjs.com/package/mcp-openproject-standalone

## Установка пакета

После публикации пользователи смогут установить пакет:

```bash
npm install -g mcp-openproject-standalone
```

Или локально:

```bash
npm install mcp-openproject-standalone
```

## Обновление пакета

При внесении изменений нужно обновить версию пакета и опубликовать новую версию в npm.

### 1. Обновление версии

Версия должна следовать [Semantic Versioning](https://semver.org/) (MAJOR.MINOR.PATCH):

- **PATCH** (`1.0.0` → `1.0.1`) - для исправлений багов (bug fixes), обратно совместимых
- **MINOR** (`1.0.0` → `1.1.0`) - для новых функций, обратно совместимых
- **MAJOR** (`1.0.0` → `2.0.0`) - для breaking changes (несовместимые изменения)

#### Способ 1: Автоматическое обновление версии (рекомендуется)

Используйте npm команды для автоматического обновления версии:

```bash
# Обновить PATCH версию (1.0.0 → 1.0.1)
npm version patch

# Обновить MINOR версию (1.0.0 → 1.1.0)
npm version minor

# Обновить MAJOR версию (1.0.0 → 2.0.0)
npm version major
```

Эти команды:
- Автоматически обновят версию в `package.json`
- Создадут git commit с сообщением "v1.0.1" (если есть git репозиторий)
- Создадут git tag с версией (если есть git репозиторий)

#### Способ 2: Ручное обновление версии

Вручную измените версию в `package.json`:

```json
{
  "version": "1.0.1"
}
```

### 2. Публикация новой версии

После обновления версии опубликуйте пакет:

```bash
npm publish
```

### 3. Полный процесс обновления

Рекомендуемый процесс:

```bash
# 1. Внесите изменения в код
# ... редактирование файлов ...

# 2. Обновите версию (например, patch)
npm version patch

# 3. Опубликуйте новую версию
npm publish

# 4. Отправьте изменения в git (если используете git)
git push
git push --tags
```

### 4. Проверка опубликованной версии

После публикации проверьте, что новая версия доступна:

```bash
npm view mcp-openproject-standalone version
```

Или посмотрите все версии:

```bash
npm view mcp-openproject-standalone versions
```

### 5. Откат версии (если нужно)

Если вы случайно опубликовали неправильную версию, вы можете:

1. Исправить код
2. Обновить версию на следующую (например, `1.0.1` → `1.0.2`)
3. Опубликовать исправленную версию

**Важно:** npm не позволяет удалять или изменять уже опубликованные версии. Можно только опубликовать новую версию.

### 6. Предварительные версии (pre-release)

Если хотите опубликовать предварительную версию (beta, alpha, rc):

```bash
# Beta версия (1.0.0 → 1.0.1-beta.0)
npm version prepatch --preid=beta

# Alpha версия (1.0.0 → 1.0.1-alpha.0)
npm version prepatch --preid=alpha

# Release candidate (1.0.0 → 1.0.1-rc.0)
npm version prepatch --preid=rc

# Публикация предварительной версии
npm publish --tag beta
```

Пользователи могут установить предварительную версию:

```bash
npm install -g mcp-openproject-standalone@beta
```

## Использование после установки

После установки через npm, пользователи могут использовать пакет в конфигурации MCP:

```json
{
  "mcpServers": {
    "openproject": {
      "command": "mcp-openproject-standalone",
      "env": {
        "OPENPROJECT_BASE_URL": "https://your-openproject-instance.com",
        "OPENPROJECT_API_KEY": "your-api-token-here"
      }
    }
  }
}
```

## Важные замечания

- **Имя пакета должно быть уникальным** - проверьте доступность перед публикацией
- **Версия должна следовать Semantic Versioning**
- **Не публикуйте секреты** - убедитесь, что `.npmignore` исключает `.env` и другие чувствительные файлы
- **README.md важен** - он будет отображаться на странице пакета в npm

